<div class="profile-card mat-elevation-z4" *ngIf="showProfileCard && user">
  <div class="profile-header">
    <mat-icon class="profile-avatar">{{ getRoleIcon() }}</mat-icon>
    <div>
      <ng-container *ngIf="user?.role === 'Customer' && customerProfile">
        <h3><span>{{ customerProfile.name || 'N/A' }}</span></h3>
      </ng-container>
      <ng-container *ngIf="user?.role === 'Vendor' && vendorProfile">
        <h3><span>{{ vendorProfile.name || 'N/A' }}</span></h3>
      </ng-container>
      <ng-container *ngIf="user?.role === 'Employee' && employeeProfile">
        <h3><span>{{ employeeProfile.name || 'N/A' }}</span></h3>
      </ng-container>
      <small>{{ user.role || 'Unknown' }}</small>
    </div>
  </div>

  <mat-divider></mat-divider>

  <div class="profile-info">
    <p>
      <mat-icon>badge</mat-icon>
      <span>ID: {{ user.id || vendorProfile?.lifnr || employeeProfile?.id || 'N/A' }}</span>
    </p>

    <!-- Customer Section -->
    <ng-container *ngIf="user?.role === 'Customer' && customerProfile">
      <p>
        <mat-icon>location_on</mat-icon>
        <span>{{ customerProfile.street || 'N/A' }}, {{ customerProfile.city || 'N/A' }}</span>
      </p>
      <p>
        <mat-icon>flag</mat-icon>
        <span>{{ customerProfile.country || 'N/A' }} - {{ customerProfile.postalCode || 'N/A' }}</span>
      </p>
    </ng-container>

    <!-- Vendor Section -->
    <ng-container *ngIf="user?.role === 'Vendor' && vendorProfile">
      <p>
        <mat-icon>location_on</mat-icon>
        <span>{{ vendorProfile.address || 'N/A' }}, {{ vendorProfile.city || 'N/A' }}</span>
      </p>
      <p>
        <mat-icon>flag</mat-icon>
        <span>{{ vendorProfile.country || 'N/A' }} - {{ vendorProfile.postalCode || 'N/A' }}</span>
      </p>
      <p>
        <mat-icon>home</mat-icon>
        <span>Home No: {{ vendorProfile.addressNumber || 'N/A' }}</span>
      </p>
    </ng-container>

    <!-- Employee Section -->
    <ng-container *ngIf="user?.role === 'Employee' && employeeProfile">
      <p>
        <mat-icon>person</mat-icon>
        <span>Gender: {{ employeeProfile.gender || 'N/A' }}</span>
      </p>
      <p>
        <mat-icon>cake</mat-icon>
        <span>DOB: {{ employeeProfile.dob || 'N/A' }}</span>
      </p>
      <p>
        <mat-icon>public</mat-icon>
        <span>Nationality: {{ employeeProfile.nationality || 'N/A' }}</span>
      </p>
      <p>
        <mat-icon>mail</mat-icon>
        <span>Email: {{ employeeProfile.email || 'N/A' }}</span>
      </p>
      <p>
        <mat-icon>apartment</mat-icon>
        <span>Company Code: {{ employeeProfile.companyCode || 'N/A' }}</span>
      </p>
      <p>
        <mat-icon>location_city</mat-icon>
        <span>City: {{ employeeProfile.city || 'N/A' }}</span>
      </p>
      <p>
        <mat-icon>payments</mat-icon>
        <span>Pay Scale: {{ employeeProfile.payScaleGroup || 'N/A' }}</span>
      </p>
      <p>
        <mat-icon>account_balance_wallet</mat-icon>
        <span>Basic Pay: â‚¹{{ employeeProfile.basicPay || 'N/A' }}</span>
      </p>
    </ng-container>

    <p>
      <mat-icon>schedule</mat-icon>
      <span>Last login: {{ user.lastLogin ? (user.lastLogin | date:'short') : 'Never' }}</span>
    </p>
  </div>
</div>
